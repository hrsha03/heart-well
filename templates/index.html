<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HeartWell</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/field_descriptions.js"></script>
    <link rel="icon" href="/static/heart-ecg-line.png">
    <!-- Bootstrap JS (for modal, if needed) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div class="container">
    <header class="text-center my-4">
        <h2>Heart Disease Risk Prediction</h2>
        <a href="https://github.com/hrsha03/heart-well" target="_blank" class="btn btn-primary">View Documentation on GitHub</a>
    </header>
    <form method="post" id="predictForm" autocomplete="off">
        <div class="mb-3">
            <label class="form-label">Age <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'Age')" onmouseleave="hideDescription()">?</button></label>
            <input type="number" class="form-control" name="age" required value="{{ form_data.get('age', '') }}">
        </div>
        <div class="mb-3">
            <label class="form-label">Sex <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'Sex')" onmouseleave="hideDescription()">?</button></label>
            <select class="form-select" name="sex" required>
                <option value="" disabled selected>- Select -</option>
                <option value="1" {% if form_data.get('sex') == 'M' %}selected{% endif %}>Male</option>
                <option value="0" {% if form_data.get('sex') == 'F' %}selected{% endif %}>Female</option>
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label">Chest Pain Type <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'ChestPainType')" onmouseleave="hideDescription()">?</button></label>
            <select class="form-select" name="chest_pain_type" required>
                <option value="" disabled selected>- Select -</option>
                <option value="TA" {% if form_data.get('chest_pain_type') == 'TA' %}selected{% endif %}>Typical angina</option>
                <option value="NAP" {% if form_data.get('chest_pain_type') == 'NAP' %}selected{% endif %}>Non-anginal pain</option>
                <option value="ASY" {% if form_data.get('chest_pain_type') == 'ASY' %}selected{% endif %}>Asymptomatic</option>
                <option value="ATA" {% if form_data.get('chest_pain_type') == 'ATA' %}selected{% endif %}>Atypical angina</option>
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label">Resting Blood Pressure <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'RestingBP')" onmouseleave="hideDescription()">?</button></label>
            <input type="number" class="form-control" name="resting_bp" required value="{{ form_data.get('resting_bp', '') }}">
        </div>
        <div class="mb-3">
            <label class="form-label">Cholesterol <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'Cholesterol')" onmouseleave="hideDescription()">?</button></label>
            <input type="number" class="form-control" name="cholesterol" required value="{{ form_data.get('cholesterol', '') }}">
        </div>
        <div class="mb-3">
            <label class="form-label">Fasting Blood Sugar > 120 <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'FastingBS')" onmouseleave="hideDescription()">?</button></label>
            <select class="form-select" name="fasting_bs" required>
                <option value="" disabled selected>- Select -</option>
                <option value="1" {% if form_data.get('fasting_bs') == '1' %}selected{% endif %}>Yes</option>
                <option value="0" {% if form_data.get('fasting_bs') == '0' %}selected{% endif %}>No</option>
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label">Resting ECG <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'RestingECG')" onmouseleave="hideDescription()">?</button></label>
            <select class="form-select" name="resting_ecg" required>
                <option value="" disabled selected>- Select -</option>
                <option value="Normal" {% if form_data.get('resting_ecg') == 'Normal' %}selected{% endif %}>Normal</option>
                <option value="ST" {% if form_data.get('resting_ecg') == 'ST' %}selected{% endif %}>ST-T wave abnormality</option>
                <option value="LVH" {% if form_data.get('resting_ecg') == 'LVH' %}selected{% endif %}>Left ventricular hypertrophy</option>
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label">Max HR <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'MaxHR')" onmouseleave="hideDescription()">?</button></label>
            <input type="number" class="form-control" name="max_hr" required value="{{ form_data.get('max_hr', '') }}">
        </div>
        <div class="mb-3">
            <label class="form-label">Exercise Angina <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'ExerciseAngina')" onmouseleave="hideDescription()">?</button></label>
            <select class="form-select" name="exercise_angina" required>
                <option value="" disabled selected>- Select -</option>
                <option value="Y" {% if form_data.get('exercise_angina') == 'Y' %}selected{% endif %}>Yes</option>
                <option value="N" {% if form_data.get('exercise_angina') == 'N' %}selected{% endif %}>No</option>
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label">Oldpeak <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'Oldpeak')" onmouseleave="hideDescription()">?</button></label>
            <input type="number" step="0.1" class="form-control" name="oldpeak" required value="{{ form_data.get('oldpeak', '') }}">
        </div>
        <div class="mb-3">
            <label class="form-label">ST Slope <button type="button" class="desc-btn" onmouseenter="showDescription(event, 'ST_Slope')" onmouseleave="hideDescription()">?</button></label>
            <select class="form-select" name="st_slope" required>
                <option value="" disabled selected>- Select -</option>
                <option value="Up" {% if form_data.get('st_slope') == 'Up' %}selected{% endif %}>Upsloping</option>
                <option value="Flat" {% if form_data.get('st_slope') == 'Flat' %}selected{% endif %}>Flat</option>
                <option value="Down" {% if form_data.get('st_slope') == 'Down' %}selected{% endif %}>Downsloping</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Predict</button>
        <button type="submit" name="reset" class="btn btn-secondary">Reset</button>
    </form>
    {% if show_prediction %}
    <div class="alert alert-info mt-4">
        <h4>Prediction Result</h4>
        <p><strong>Risk:</strong> {{ risk }}</p>
        <p><strong>Label:</strong> {{ label }}</p>
    </div>
    {% endif %}
</div>
<!-- Add tooltip element for descriptions -->
<div id="descTooltip" style="display:none; position:absolute; background-color:rgba(0,0,0,0.8); color:white; padding:5px; border-radius:5px; z-index:1000;"></div>
</body>
</html>
